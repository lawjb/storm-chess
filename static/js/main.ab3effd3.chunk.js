(this["webpackJsonpstorm-chess"]=this["webpackJsonpstorm-chess"]||[]).push([[0],{33:function(e,t,n){e.exports=n(51)},38:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(15),c=n.n(o),s=(n(38),n(8)),i=n(11),u=n(14),l=n(26),f=n.n(l),m=n(29),v=n(27),b=n(28),p=["a1","a2","a3","a4","a5","a6","a7","a8","h1","h2","h3","h4","h5","h6","h7","h8","b1","c1","d1","e1","f1","g1","b8","c8","d8","e8","f8","g8","b2","b3","b4","b5","b6","b7","g2","g3","g4","g5","g6","g7","c2","d2","e2","f2","c7","d7","e7","f7","c3","d3","e3","f3","c6","d6","e6","f6","c4","c5","f4","f5","d4","e4","d5","e5"],d=new(n.n(b).a),g=[15,25,35,45],h={background:"radial-gradient(circle, #fffc00 36%, transparent 40%)",borderRadius:"50%"},O={background:"#003366",opacity:"70%"},S=new function(){var e=0,t=!1,n=p,r=[],a=0;function o(){return d.half_moves>=100||function(){for(var e=0,t=0;t<n.length;t++)e+=c(n[t]).length;return 0===e}()||d.in_stalemate()||d.insufficient_material()}function c(t){var r=[],o=n.slice();if(Math.floor(a)+1===g[e]){var c=16-4*e;if(e>=2&&(c=20-4*e),o.splice(0,c).some((function(e){var t=d.get(e);return t&&"k"===t.type&&t.color===d.turn()}))){var s=d.get(t);s&&"k"!==s.type&&(o=[])}}var i,u=d.moves({square:t,verbose:!0}),l=Object(v.a)(u);try{for(l.s();!(i=l.n()).done;){var f=i.value;o.includes(f.to)&&r.push(f.to)}}catch(m){l.e(m)}finally{l.f()}return r}return Object(i.a)(Object(i.a)({},d),{},{move:function(s){var i=s.sourceSquare,u=s.targetSquare,l=d.turn(),f=Math.floor(e/2);if(c(i).includes(u)){if(d.move({from:i,to:u,promotion:"q"}),a+=.5,e>1&&(u.includes((f+1).toString())||u.includes((8-f).toString()))){var v=d.get(u);v&&"p"===v.type&&(d.remove(u),d.put({type:"q",color:l},u))}g.includes(a)&&function(){var t,a=16-4*e;e>=2&&(a=20-4*e);for(var o=0;o<a;o++)d.remove(n[o]);(t=r).push.apply(t,Object(m.a)(n.splice(0,a))),e+=1}(),t=o()}},moves:c,status:function(){return{stormLevel:e,gameOver:t,liveSquares:n,zappedSquares:r,turn:a,playerToMove:"b"===d.turn()?"Black":"White"}},reset:function(){d.reset(),e=0,t=!1,n=p,r=[],a=0}})};function E(){var e=Object(r.useState)(S.status()),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)("start"),l=Object(u.a)(c,2),m=l[0],v=l[1],b=Object(r.useState)({}),p=Object(u.a)(b,2),d=p[0],g=p[1],E=Object(r.useState)("white"),y=Object(u.a)(E,2),w=y[0],q=y[1],M=function(e){var t=e.possibleMoves;return Object(i.a)(Object(i.a)({},Object.fromEntries(t.map((function(e){return[e,h]})))),Object.fromEntries(n.zappedSquares.map((function(e){return[e,O]}))))};return a.a.createElement(s.d,{flex:1,flexDirection:"row",justifyContent:"center"},a.a.createElement(s.b,null,a.a.createElement(f.a,{position:m,squareStyles:d,onMouseOverSquare:function(e){g(M({possibleMoves:S.moves(e)}))},onMouseOutSquare:function(){g(M({possibleMoves:[]}))},onDrop:function(e){var t=e.sourceSquare,n=e.targetSquare;null!==S.move({sourceSquare:t,targetSquare:n})&&(v(S.fen()),o(S.status()),g(M({possibleMoves:[]})))},orientation:w})),a.a.createElement(j,{status:n,orientation:w,setOrientation:q,resetBoard:function(){S.reset(),v(S.fen()),o(S.status()),g(M({possibleMoves:[]}))}}))}function j(e){var t=e.status,n=e.orientation,r=e.setOrientation,o=e.resetBoard,c=g[t.stormLevel]-Math.floor(t.turn),i=g[t.stormLevel]-(g[t.stormLevel-1]||0);return a.a.createElement(s.b,{marginLeft:16,padding:4},a.a.createElement("p",null,"Player to move: ",t.playerToMove),a.a.createElement("p",null,"Turn: ",Math.floor(t.turn)),a.a.createElement("p",null,"Turns until next storm: ",c),a.a.createElement(s.f,{marginBottom:4,progress:100*c/i,bg:s.g.colors.blue}),a.a.createElement(s.c,{marginBottom:2,width:"100%",type:"button",onClick:function(){return r("white"===n?"black":"white")}},"Flip board"),a.a.createElement(s.c,{marginBottom:2,width:"100%",type:"button",onClick:o},"Reset board"))}var y=function(){return a.a.createElement(s.a,null,a.a.createElement(s.e,{fontSize:24,margin:2,textAlign:"center"},"Storm Chess"),a.a.createElement(E,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.ab3effd3.chunk.js.map